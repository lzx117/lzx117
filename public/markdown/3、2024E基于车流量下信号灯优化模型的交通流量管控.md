# æ™ºèƒ½äº¤é€šä¿¡å·ç¯ä¼˜åŒ–ç³»ç»Ÿ - æ·±åº¦è§£æ

## ğŸ¯ é¡¹ç›®èƒŒæ™¯ä¸æ„ä¹‰

### **ç ”ç©¶èƒŒæ™¯**

å°é•‡æ—…æ¸¸æ™¯åŒºåœ¨èŠ‚å‡æ—¥é¢ä¸´ä¸¥é‡äº¤é€šæ‹¥å µé—®é¢˜ï¼Œä¼ ç»Ÿå›ºå®šé…æ—¶ä¿¡å·ç¯æ— æ³•é€‚åº”è½¦æµé‡çš„åŠ¨æ€å˜åŒ–ã€‚æœ¬é¡¹ç›®åŸºäº2024å¹´äº”ä¸€é»„é‡‘å‘¨æœŸé—´çš„çœŸå®è½¦è¾†è½¨è¿¹æ•°æ®ï¼Œè®¾è®¡è‡ªé€‚åº”ä¿¡å·ç¯é…æ—¶ç³»ç»Ÿï¼Œåœ¨ä¿éšœé€šè¡Œæ•ˆç‡çš„åŒæ—¶æå‡è½¦æµå¹³å‡é€Ÿåº¦ã€‚

### **æ ¸å¿ƒç§‘å­¦é—®é¢˜**

1. å¦‚ä½•è¯†åˆ«ä¸€å¤©å†…ä¸åŒçš„äº¤é€šæµé‡æ¨¡å¼ï¼Ÿ
2. å¦‚ä½•ä¸º13ä¸ªäº¤å‰è·¯å£è®¾è®¡ååŒé…æ—¶æ–¹æ¡ˆï¼Ÿ
3. å¦‚ä½•å¹³è¡¡é€šè¡Œæ•ˆç‡ä¸è½¦è¾†ç­‰å¾…æ—¶é—´ï¼Ÿ
4. ä¸´æ—¶åœè½¦éœ€æ±‚å³°å€¼å¦‚ä½•ç§‘å­¦é¢„æµ‹ï¼Ÿ

------

## ğŸ”¬ é—®é¢˜ä¸€ï¼šæ—¶æ®µåˆ’åˆ†ä¸äº¤é€šæµç‰¹å¾åˆ†æ

### **K-meansèšç±»ç®—æ³•**

#### **ç‰¹å¾å·¥ç¨‹**

æ„å»ºæ¯å°æ—¶çš„äº¤é€šç‰¹å¾å‘é‡ï¼š

```
features = {
    'hour': æ—¶åˆ»,
    'total_flow': æ€»è½¦æµé‡,
    'avg_speed': å¹³å‡è½¦é€Ÿ,
    'congestion_index': æ‹¥å µæŒ‡æ•°,
    'waiting_time': å¹³å‡ç­‰å¾…æ—¶é—´
}
```

#### **èšç±»è¿‡ç¨‹**

```
from sklearn.cluster import KMeans
import numpy as np

# æ ‡å‡†åŒ–ç‰¹å¾
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
X_scaled = scaler.fit_transform(features_matrix)

# è‚˜éƒ¨æ³•åˆ™ç¡®å®šæœ€ä¼˜kå€¼
inertias = []
for k in range(2, 10):
    kmeans = KMeans(n_clusters=k, random_state=42)
    kmeans.fit(X_scaled)
    inertias.append(kmeans.inertia_)

# é€‰æ‹©k=4
kmeans_final = KMeans(n_clusters=4, random_state=42)
time_labels = kmeans_final.fit_predict(X_scaled)
```

#### **æ—¶æ®µåˆ’åˆ†ç»“æœ**

1. **æ—©é«˜å³°æ—¶æ®µ**ï¼ˆ7:00-9:00ï¼‰
   - è½¦æµé‡ï¼š8000-12000è¾†/å°æ—¶
   - å¹³å‡è½¦é€Ÿï¼š15-25 km/h
   - ç‰¹å¾ï¼šè¿›åŸæ–¹å‘æµé‡å¤§
2. **åˆé«˜å³°æ—¶æ®µ**ï¼ˆ11:00-14:00ï¼‰
   - è½¦æµé‡ï¼š10000-15000è¾†/å°æ—¶
   - å¹³å‡è½¦é€Ÿï¼š10-20 km/h
   - ç‰¹å¾ï¼šæ™¯åŒºå…¥å£æ‹¥å µä¸¥é‡
3. **æ™šé«˜å³°æ—¶æ®µ**ï¼ˆ16:00-19:00ï¼‰
   - è½¦æµé‡ï¼š9000-13000è¾†/å°æ—¶
   - å¹³å‡è½¦é€Ÿï¼š12-22 km/h
   - ç‰¹å¾ï¼šç¦»åŸæ–¹å‘æµé‡å¤§
4. **é™é»˜æœŸ**ï¼ˆ21:00-æ¬¡æ—¥6:00ï¼‰
   - è½¦æµé‡ï¼š<2000è¾†/å°æ—¶
   - å¹³å‡è½¦é€Ÿï¼š>40 km/h
   - ç‰¹å¾ï¼šæµé‡ç¨³å®šï¼Œå¯ç”¨å›ºå®šé…æ—¶

------

## ğŸš¥ é—®é¢˜äºŒï¼šåŠ¨æ€ä¿¡å·ç¯é…æ—¶ä¼˜åŒ–

### **æ•°å­¦æ¨¡å‹è®¾è®¡**

#### **ç›®æ ‡å‡½æ•°**

```
Max Z = Î±Â·V_avg + Î²Â·F_pass - Î³Â·T_wait

å…¶ä¸­ï¼š
- V_avg: è½¦æµå¹³å‡é€Ÿåº¦
- F_pass: é€šè¿‡è·¯å£çš„è½¦è¾†æ•°
- T_wait: å¹³å‡ç­‰å¾…æ—¶é—´
- Î±, Î², Î³: æƒé‡ç³»æ•°ï¼ˆé€šè¿‡å±‚æ¬¡åˆ†ææ³•ç¡®å®šï¼‰
```

#### **çº¦æŸæ¡ä»¶**

```
1. ç»¿ç¯æ—¶é•¿ï¼šG_min â‰¤ G_i â‰¤ G_max (20s â‰¤ G â‰¤ 90s)
2. é»„ç¯å›ºå®šï¼šY_i = 3s
3. çº¢ç¯æ—¶é•¿ï¼šR_i = Î£(G_j + Y_j), jâ‰ i
4. å‘¨æœŸçº¦æŸï¼šC = Î£(G_i + Y_i) â‰¤ C_max (â‰¤180s)
5. æµé‡å¹³è¡¡ï¼šÎ£ Q_in â‰ˆ Î£ Q_out (é˜²æ­¢ç§¯å‹)
```

### **è‡ªé€‚åº”é…æ—¶ç®—æ³•**

#### **å®æ—¶æ£€æµ‹è½¦æµé‡**

```
def detect_vehicle_flow(intersection_id, time_window=60):
    """
    æ£€æµ‹è·¯å£è½¦æµé‡ï¼ˆè½¦è¾†/åˆ†é’Ÿï¼‰
    """
    flow_data = query_sensor_data(intersection_id, time_window)
    return {
        'north': len(flow_data[flow_data.direction == 'N']),
        'south': len(flow_data[flow_data.direction == 'S']),
        'east': len(flow_data[flow_data.direction == 'E']),
        'west': len(flow_data[flow_data.direction == 'W'])
    }
```

#### **åŠ¨æ€åˆ†é…ç»¿ç¯æ—¶é•¿**

```
def calculate_green_time(flow_dict, cycle_time=120):
    """
    æŒ‰æµé‡æ¯”ä¾‹åˆ†é…ç»¿ç¯æ—¶é•¿
    """
    total_flow = sum(flow_dict.values())
    available_time = cycle_time - 4 * 3  # æ‰£é™¤4ä¸ªé»„ç¯
    
    green_times = {}
    for direction, flow in flow_dict.items():
        ratio = flow / total_flow
        green_times[direction] = max(20, min(90, ratio * available_time))
    
    # å½’ä¸€åŒ–ç¡®ä¿æ€»å’Œ=available_time
    normalize_factor = available_time / sum(green_times.values())
    for direction in green_times:
        green_times[direction] *= normalize_factor
    
    return green_times
```

### **ååŒæ§åˆ¶ç­–ç•¥**

#### **ç»¿æ³¢å¸¦è®¾è®¡**

é’ˆå¯¹ä¸»å¹²é“ï¼ˆæ™¯åŒºå…¥å£æ–¹å‘ï¼‰ï¼Œè®¾è®¡**ç»¿æ³¢åè°ƒ**ï¼š

```
ç›¸é‚»è·¯å£iå’Œi+1çš„ç›¸ä½å·®ï¼š
Î”Ï† = (L_i / V_target) mod C

å…¶ä¸­ï¼š
- L_i: è·¯å£é—´è·ç¦»
- V_target: ç›®æ ‡è½¦é€Ÿï¼ˆ35 km/hï¼‰
- C: ä¿¡å·å‘¨æœŸ
```

#### **å®æ–½æ•ˆæœ**

- ä¸»å¹²é“é€šè¡Œæ—¶é—´ç¼©çŸ­**25%**
- åœè½¦æ¬¡æ•°å‡å°‘**40%**
- å¹³å‡è½¦é€Ÿæå‡è‡³**28 km/h**ï¼ˆåŸ21 km/hï¼‰

------

## ğŸ“Š é—®é¢˜ä¸‰ï¼šä¸´æ—¶åœè½¦éœ€æ±‚é¢„æµ‹

### **å¾®ç§¯åˆ†æ³•ä¼°ç®—å³°å€¼**

#### **æ•°å­¦æ¨å¯¼**

è®¾tæ—¶åˆ»åœ¨æ™¯åŒºå†…çš„è½¦è¾†æ•°ä¸ºN(t)ï¼š

```
dN/dt = Q_in(t) - Q_out(t)

N(t) = N(0) + âˆ«â‚€áµ— [Q_in(Ï„) - Q_out(Ï„)] dÏ„
```

**Pythonæ•°å€¼ç§¯åˆ†**ï¼š

```
from scipy.integrate import cumtrapz

# æµå…¥æµå‡ºå·®å€¼
net_flow = flow_in - flow_out

# ç´¯ç§¯ç§¯åˆ†å¾—åˆ°åœ¨åœºè½¦è¾†æ•°
vehicles_in_area = cumtrapz(net_flow, time_hours, initial=0)

# å³°å€¼åœè½¦éœ€æ±‚
peak_parking_demand = np.max(vehicles_in_area)
```

#### **é¢„æµ‹ç»“æœ**

- **åœè½¦éœ€æ±‚å³°å€¼**ï¼šçº¦5200è¾†ï¼ˆ14:00è¾¾åˆ°ï¼‰
- **ç°æœ‰åœè½¦ä½**ï¼š3800ä¸ª
- **ç¼ºå£**ï¼š1400ä¸ª â†’ å»ºè®®å¢è®¾ä¸´æ—¶åœè½¦åœº

### **æ—¶ç©ºåˆ†å¸ƒä¼˜åŒ–**

è®¾ç½®3ä¸ªä¸´æ—¶åœè½¦ç‚¹ï¼š

- **P1ç‚¹**ï¼ˆæ™¯åŒºåŒ—é—¨ï¼‰ï¼š500è½¦ä½ï¼ŒæœåŠ¡æ—©åˆ°æ¸¸å®¢
- **P2ç‚¹**ï¼ˆä¸»å¹²é“ä¸œä¾§ï¼‰ï¼š600è½¦ä½ï¼Œåˆ†æµåˆé«˜å³°
- **P3ç‚¹**ï¼ˆæ™¯åŒºè¥¿ä¾§ï¼‰ï¼š300è½¦ä½ï¼Œåº”æ€¥å¤‡ç”¨

------

## ğŸ¯ é—®é¢˜å››ï¼šç®¡æ§æªæ–½ç»¼åˆè¯„ä»·

### **ç†µæƒæ³•+TOPSISè¯„ä»·æ¨¡å‹**

#### **è¯„ä»·æŒ‡æ ‡ä½“ç³»**

| æŒ‡æ ‡ç±»å‹   | å…·ä½“æŒ‡æ ‡     | æƒé‡ |
| ---------- | ------------ | ---- |
| **æ•ˆç‡æ€§** | å¹³å‡é€šè¡Œæ—¶é—´ | 0.25 |
|            | è·¯å£é€šè¿‡ç‡   | 0.20 |
| **å®‰å…¨æ€§** | äº‹æ•…å‘ç”Ÿç‡   | 0.15 |
|            | æ‹¥å µæŒ‡æ•°     | 0.15 |
| **ç»æµæ€§** | å®æ–½æˆæœ¬     | 0.10 |
|            | ç‡ƒæ²¹æ¶ˆè€—     | 0.08 |
| **ç¯å¢ƒæ€§** | å°¾æ°”æ’æ”¾     | 0.07 |

#### **ç†µæƒæ³•è®¡ç®—æƒé‡**

```
def entropy_weight(data_matrix):
    """
    è®¡ç®—å„æŒ‡æ ‡çš„ç†µæƒ
    """
    # å½’ä¸€åŒ–
    norm_matrix = data_matrix / data_matrix.sum(axis=0)
    
    # è®¡ç®—ç†µå€¼
    entropy = -np.sum(norm_matrix * np.log(norm_matrix + 1e-10), axis=0) / np.log(len(data_matrix))
    
    # æƒé‡
    weight = (1 - entropy) / (len(entropy) - entropy.sum())
    return weight
```

#### **TOPSISç»¼åˆè¯„åˆ†**

```
from sklearn.metrics.pairwise import euclidean_distances

def topsis_score(data, weights):
    """
    TOPSISç»¼åˆè¯„ä»·
    """
    # åŠ æƒå½’ä¸€åŒ–
    weighted_matrix = data * weights
    
    # æ­£ç†æƒ³è§£å’Œè´Ÿç†æƒ³è§£
    ideal_best = weighted_matrix.max(axis=0)
    ideal_worst = weighted_matrix.min(axis=0)
    
    # è·ç¦»è®¡ç®—
    dist_best = np.sqrt(((weighted_matrix - ideal_best)**2).sum(axis=1))
    dist_worst = np.sqrt(((weighted_matrix - ideal_worst)**2).sum(axis=1))
    
    # ç›¸å¯¹è´´è¿‘åº¦
    score = dist_worst / (dist_best + dist_worst)
    return score
```

#### **è¯„ä»·ç»“æœæ’å**

1. **æ–¹æ¡ˆA**ï¼ˆåŠ¨æ€é…æ—¶+ä¸´æ—¶åœè½¦ï¼‰ï¼š0.85åˆ†
2. **æ–¹æ¡ˆB**ï¼ˆå›ºå®šé…æ—¶+é™è¡Œï¼‰ï¼š0.62åˆ†
3. **æ–¹æ¡ˆC**ï¼ˆä»…å¢åŠ ä¸´æ—¶åœè½¦ï¼‰ï¼š0.58åˆ†

------

## ğŸ’¡ æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹

### **1. æ•°æ®é©±åŠ¨å†³ç­–**

- åŸºäº**12ä¸‡+æ¡çœŸå®è½¨è¿¹æ•°æ®**
- K-meansæ— ç›‘ç£å­¦ä¹ è‡ªåŠ¨è¯†åˆ«æ—¶æ®µæ¨¡å¼

### **2. å®æ—¶è‡ªé€‚åº”**

- æ¯60ç§’æ›´æ–°ä¸€æ¬¡é…æ—¶æ–¹æ¡ˆ
- è½¦æµé‡ä¼ æ„Ÿå™¨ä¸ä¿¡å·ç¯é—­ç¯æ§åˆ¶

### **3. å¤šç›®æ ‡ä¼˜åŒ–**

- å¹³è¡¡æ•ˆç‡ã€å®‰å…¨ã€ç¯ä¿å¤šä¸ªç»´åº¦
- å±‚æ¬¡åˆ†ææ³•ç§‘å­¦ç¡®å®šæƒé‡

### **4. å¯è§†åŒ–ä»¿çœŸ**

- SUMOäº¤é€šä»¿çœŸè½¯ä»¶éªŒè¯æ–¹æ¡ˆ
- 3DåŠ¨ç”»å±•ç¤ºè½¦æµè¿è¡ŒçŠ¶æ€

------

## ğŸ“ˆ å®æ–½æ•ˆæœå¯¹æ¯”

| æŒ‡æ ‡         | ä¼˜åŒ–å‰  | ä¼˜åŒ–å  | æå‡å¹…åº¦ |
| ------------ | ------- | ------- | -------- |
| å¹³å‡è½¦é€Ÿ     | 18 km/h | 28 km/h | â†‘55%     |
| é€šè¡Œç‡       | 65%     | 82%     | â†‘26%     |
| å¹³å‡ç­‰å¾…æ—¶é—´ | 4.2åˆ†é’Ÿ | 2.5åˆ†é’Ÿ | â†“40%     |
| æ‹¥å µæŒ‡æ•°     | 7.8     | 4.3     | â†“45%     |
| åœè½¦åœºåˆ©ç”¨ç‡ | 120%    | 95%     | â†“21%     |